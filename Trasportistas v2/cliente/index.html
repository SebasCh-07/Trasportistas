<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cliente | TeLlevo</title>
  <link rel="stylesheet" href="../shared/assets/styles.css" />
  <link rel="stylesheet" href="./cliente.css" />
</head>
<body class="page">
  <div id="navbar"></div>
  <main class="container">
      <div class="client-layout">
        <aside class="sidebar">
          <div class="side-tabs" id="outerTabs">
            <div class="tab active" data-tab="catalogo">Catálogo / Rutas</div>
            <div class="tab" data-tab="reservas">Reservas</div>
            <div class="tab" data-tab="historial">Historial de Reservas</div>
          </div>
        </aside>
        <div class="content-area">
          <h2>Explora y Reserva</h2>

      <section id="tab-catalogo">
        <div class="card">
          <div class="section-header"><h3>Catálogo</h3></div>
          <div class="tabs" id="catalogTabs">
            <div class="tab active" data-cat="rutas">Rutas</div>
            <div class="tab" data-cat="encomienda">Encomienda</div>
            <div class="tab" data-cat="p2p">Traslado Punto a Punto</div>
            <div class="tab" data-cat="aeropuerto">Transfer Aeropuerto</div>
          </div>

          <div id="catalog-panel-rutas">
            <div class="grid cols-3" style="align-items:end">
              <div class="form-row">
                <label>Modalidad</label>
                <select id="routeModeSelect">
                  <option value="privada" selected>Privada</option>
                  <option value="compartida">Compartida</option>
                </select>
              </div>
            </div>
            <div id="catalog" class="catalog" style="margin-top:12px"></div>
          </div>

          <div id="catalog-panel-encomienda" class="hidden">
            <form id="formEncomienda" class="grid cols-3">
              <div class="form-row"><label>Remitente</label><input id="encRemitente" required /></div>
              <div class="form-row"><label>Destinatario</label><input id="encDestinatario" required /></div>
              <div class="form-row"><label>Teléfono contacto</label><input id="encTelefono" required /></div>
              <div class="form-row" style="grid-column:1/-1"><label>Descripción del paquete</label><input id="encDescripcion" required /></div>
              <div class="form-row"><label>Origen</label><input id="encOrigen" placeholder="Dirección de recogida" required /></div>
              <div class="form-row"><label>Destino</label><input id="encDestino" placeholder="Dirección de entrega" required /></div>
              <div class="form-row" style="grid-column:1/-1"><button class="btn primary" type="submit">Solicitar Encomienda</button></div>
            </form>
          </div>

          <div id="catalog-panel-p2p" class="hidden">
            <form id="formP2P" class="grid cols-3">
              <div class="form-row"><label>Origen</label><input id="p2pOrigen" required /></div>
              <div class="form-row"><label>Destino</label><input id="p2pDestino" required /></div>
              <div class="form-row"><label>Fecha y hora</label><input id="p2pFecha" type="datetime-local" required /></div>
              <div class="form-row" style="grid-column:1/-1"><label>Notas</label><input id="p2pNotas" /></div>
              <div class="form-row" style="grid-column:1/-1"><button class="btn primary" type="submit">Solicitar Traslado</button></div>
            </form>
          </div>

          <div id="catalog-panel-aeropuerto" class="hidden">
            <form id="formAeropuerto" class="grid cols-3">
              <div class="form-row"><label>Tipo</label>
                <select id="airTipo" required>
                  <option value="llegada">Llegada → Ciudad</option>
                  <option value="salida">Ciudad → Aeropuerto</option>
                </select>
              </div>
              <div class="form-row"><label>Vuelo</label><input id="airVuelo" placeholder="Ej: AV123" required /></div>
              <div class="form-row"><label>Fecha y hora</label><input id="airFecha" type="datetime-local" required /></div>
              <div class="form-row" style="grid-column:1/-1"><label>Dirección</label><input id="airDireccion" placeholder="Hotel o dirección" required /></div>
              <div class="form-row" style="grid-column:1/-1"><button class="btn primary" type="submit">Solicitar Transfer</button></div>
            </form>
          </div>
        </div>
      </section>

      <section id="tab-reservas" class="hidden">
        <div class="card reservas-card">
          <div class="section-header"><h3>Mis Reservas</h3></div>
          <div class="tabs" id="innerTabs">
            <div class="tab active" data-subtab="pendiente">Pendiente</div>
            <div class="tab" data-subtab="confirmado">Confirmado</div>
            <div class="tab" data-subtab="en-curso">En Curso</div>
          </div>
          <div id="panel-pendiente">
            <div id="myBookingsPending"></div>
          </div>
          <div id="panel-confirmado" class="hidden">
            <div id="myBookingsConfirmed"></div>
          </div>
          <div id="panel-en-curso" class="hidden">
            <div id="myBookingsInProgress"></div>
          </div>
        </div>
        <div class="card" style="margin-top:16px;">
          <div class="section-header"><h3>Tracking</h3></div>
          <div class="map" id="trackingMap"></div>
        </div>
      </section>

      <section id="tab-historial" class="hidden">
        <div class="card">
          <div class="section-header"><h3>Historial de Reservas</h3></div>
          <div id="bookingHistory"></div>
        </div>
      </section>
        </div>
      </div>
  </main>
  <div class="modal-backdrop" id="routeBackdrop"></div>
  <div class="modal" id="routeModal">
    <div class="modal-content">
      <div class="modal-header">
        <strong id="routeTitle"></strong>
        <button id="closeRoute" class="btn ghost" title="Cerrar">✖</button>
      </div>
      <div class="modal-body" id="routeBody"></div>
      <div class="modal-footer">
        <button class="btn primary" id="routeCloseBtn">Cerrar</button>
      </div>
    </div>
  </div>
  <!-- Modal de Reserva -->
  <div class="modal-backdrop" id="bookingBackdrop"></div>
  <div class="modal" id="bookingModal">
    <div class="modal-content">
      <div class="modal-header">
        <strong id="bookingTitle">Nueva reserva</strong>
        <button id="closeBooking" class="btn ghost" title="Cerrar">✖</button>
      </div>
      <div class="modal-body">
        <form id="bookingForm" class="booking-form">
          <div class="section-box">
            <div class="section-title">Consulta disponibilidad</div>
            <div class="grid cols-2">
              <div class="form-row" style="grid-column:1/-1"><small class="muted" id="bookingModeHint"></small></div>
              <div class="form-row">
                <label for="bkAdultos">Adultos</label>
                <select id="bkAdultos">
                  <option value="0">0</option>
                  <option value="1" selected>1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                </select>
              </div>
              <div class="form-row">
                <label for="bkNinos">Niños (5-12)</label>
                <select id="bkNinos">
                  <option value="0" selected>0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                </select>
              </div>
              <div class="form-row">
                <label for="bkInfantes">Infantes</label>
                <select id="bkInfantes">
                  <option value="0" selected>0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                </select>
              </div>
              <div class="form-row"></div>
              <div class="form-row">
                <label for="bkFechaDate">Fecha</label>
                <input id="bkFechaDate" type="date" required />
              </div>
              <div class="form-row">
                <label for="bkHora">Hora</label>
                <input id="bkHora" type="time" required />
              </div>
            </div>
          </div>

          <div class="grid cols-2" style="margin-top:12px;">
            <div class="form-row hidden" id="bkCompartidaOnly">
              <label for="bkAsientos">Asientos</label>
              <input id="bkAsientos" type="number" min="1" value="1" />
            </div>
            <div class="form-row hidden" id="bkPuntoEncuentroRow" style="grid-column:1/-1">
              <label for="bkPuntoEncuentro">Punto de encuentro</label>
              <input id="bkPuntoEncuentro" placeholder="Dirección o referencia" />
            </div>
            <div class="form-row" style="grid-column:1/-1">
              <label for="bkNotas">Notas</label>
              <input id="bkNotas" placeholder="Preferencias, referencias, etc." />
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn ghost" id="cancelBooking">Cancelar</button>
        <button class="btn primary" id="submitBooking">Continuar</button>
      </div>
    </div>
  </div>

  <!-- Modal Checkout / Resumen y Pago -->
  <div class="modal-backdrop" id="checkoutBackdrop"></div>
  <div class="modal" id="checkoutModal">
    <div class="modal-content checkout-content">
      <div class="modal-header">
        <strong>Realiza tu reserva</strong>
        <button id="closeCheckout" class="btn ghost" title="Cerrar">✖</button>
      </div>
      <div class="modal-body">
        <div class="checkout-grid">
          <form id="checkoutForm" class="checkout-form">
            <div class="grid cols-2">
              <div class="form-row"><label for="ckNombre">Nombres*</label><input id="ckNombre" required /></div>
              <div class="form-row"><label for="ckApellido">Apellidos*</label><input id="ckApellido" required /></div>
              <div class="form-row"><label for="ckEmail">Correo*</label><input id="ckEmail" type="email" required /></div>
              <div class="form-row"><label for="ckTelefono">Teléfono*</label><input id="ckTelefono" required /></div>
              <div class="form-row" style="grid-column:1/-1"><label for="ckNotas">Requerimientos especiales</label><input id="ckNotas" /></div>
            </div>
            <div class="coupon-row">
              <label for="ckCupon">¿Tienes un cupón?</label>
              <div class="coupon-actions">
                <input id="ckCupon" placeholder="Código" />
                <button id="applyCoupon" class="btn ghost" type="button">Aplicar</button>
              </div>
            </div>
            <div class="payment-row">
              <label for="ckPago">Selecciona método de pago</label>
              <select id="ckPago">
                <option value="efectivo">Efectivo</option>
                <option value="tarjeta">Tarjeta</option>
                <option value="transferencia">Transferencia</option>
                <option value="voucher">Voucher</option>
              </select>
              <small class="muted" id="payInstruction"></small>
            </div>
          </form>

          <aside class="checkout-summary">
            <div class="summary-card">
              <div class="summary-row"><div class="s-label">Tours</div><div class="s-value" id="sumTour">-</div></div>
              <div class="summary-row"><div class="s-label">Tarifa</div><div class="s-value">General</div></div>
              <div class="summary-row"><div class="s-label">Fecha</div><div class="s-value" id="sumFecha">-</div></div>
              <div class="summary-row"><div class="s-label">Horario</div><div class="s-value" id="sumHora">-</div></div>
              <div class="summary-row"><div class="s-label">Personas</div><div class="s-value" id="sumPersonas">-</div></div>
              <div class="summary-total"><div class="s-label">Subtotal:</div><div class="s-value" id="sumSubtotal">$0.00 USD</div></div>
            </div>
          </aside>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn ghost" id="cancelCheckout">Cancelar</button>
        <button class="btn primary" id="confirmCheckout">Confirmar y reservar</button>
      </div>
    </div>
  </div>
  <div id="footer"></div>
  <script type="module" src="./cliente.js"></script>
</body>
</html>


